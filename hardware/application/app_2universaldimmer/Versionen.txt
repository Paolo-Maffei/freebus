V0.1
----
- Erster Entwurf eines Universaldimmers, der die Lastart erkennt und entsprechend das 
  Phasenanschnittsverfahren auswÃ¤hlt.
- Bisher ist nur der Leistungsteil geplant, die Ansteuerung sollte der eigentliche EIB-Controller mit Ã¼bernehmen.
  Hier kenne ich die Software noch nicht, so dass ich nicht weiss, ob das funktioniert.
  Es muss wohl Ã¼ber Interrupts und Timer laufen, wieviele davon frei sind ist mir noch unbekannt
- Ansteuerung der FETS Ã¼ber IO4 und einen Optokoppler
- Phasenlage der Spannung (U-Signal) Ã¼ber einen OperationsverstÃ¤rker und Optokoppler auf Port IO1 und SDA (wegen IRQ)
  Muss noch geklÃ¤rt werden ob nÃ¶tig / mÃ¶glich.
- Phasenlage des Stroms Ã¼ber R1 einen OperationsverstÃ¤rker und Optokoppler auf Port IO2
- Feststellen der Lastart: z.B. nach Erkennung eines Spannungssignals wird die rel. Phasenlage zwischen U-Signal und I-Signal gemessen
  und daraus die Lastart bestimmt. 
- zur Spannungsversorgung der OperationsverstÃ¤rker ist bisher ein C-Netzteil geplant,
  dies ist wegen dem C allerdings recht groÃŸ, vielleicht fÃ¤llt mir ja noch was besseres ein
  Nachgeschaltet ist ein DC-CD-Wanderler, der 2x12V galvanisch getrennt daraus macht.
  Damit liegen die +-12V immer relativ zu AGND, welches an R1 fixiert ist.
  Vielleicht kann bei geeigneter Schaltung die galvanische Trennung und die +-12V entfallen,
  das wÃ¼rde den Schaltungsaufwand und den Platzbedart erheblich minimieren.
  Ideen fÃ¼r eine Anschaltung?
- Schaltung ist bisher nur theoretisch Entworfen


V0.2
----
- C5 entfern da unnÃ¶tig


V0.3
----
- Zwischenversion


V0.4
----
- Kondensatoren nach DC/DC entfernt
- R13 und R14 hinzugefÃ¼gt
- Schaltung auf Steckbrett aufgebaut und getestet (nur mit 5V geleichspannung, ohne Controller
  --> U-Signal und I-Signal werden sauber erzeugt.
      Damit sinddie NulldurchgÃ¤nge von Spannungund Strom genau detektierbar


V0.5
----
- OperationsverstÃ¤rker fÃ¼r I-Signal invertiert
- WiderstÃ¤nden nach Optokopplern eingefÃ¼gt (falls Port = Ausgang)
- DC/DC Wandler nur mit einfachen 12V
- Portzuordnung neu festgelegt


V0.6
----
- C-Netzteil und DC/DC-Wandler durch Trafo ersetzt
- Ueberlasterkennung hinzugefuegt
- 2. Kanal hinzugefuegt


V0.6.1
------
- C5,C6 hinzugefuegt

V0.6.3
------
- R16,R16,R116,R117 geaendert
- erstes Boardlayout erstellt (noch ohne Pullup)


V0.7
----
- Pullupwiderstaende (R13,R18,R19,R113,R118,R119) entfernt
  sind unnoetig wenn uC im Modus Quasi-Bidirektional


V0.8
----
- Ueberlastsensor schaltet nun hardwaremaessig die FETs aus
  --> Kurzschlußchutz

V0.8.1
------
- Testpins hinzugefügt


V0.9
----
- Überlastschutz geändert:
    R20,R120 Hysterese eingebaut
    R21,R121 Strombegrenzung wegen Einschaltstromspitzen
    R16,R116 Strombegrenzung auf 350W eingestellt 3k9
  Bei Ueberlast werden die FETs für 3s hardwaremaessig abgeschaltet und 
  der Ueberlastfall an den Controller gemeldet

Erfahrungen aus der aufgebauten Version 0.9:
1)Lochdurchmesser bei selbstgefertigter Platine:
  alle Bohrungen mit 0,8mm außer
	+ 0,5mm für die VIAs
	+ 1,0mm für SV1 Stiftleiste
	+ 1,2mm für R1,R101 und alle Klemmen
	+ 1,5mm für Q1..Q4 und Sicherung
	+ 2,0mm für die Schraubenlöcher
2)Kupferring für die Schraubenlöcher, damit diese einfacher zu bohren sind
3)Klemmen KL1A, KL1B, KL2A, KL2B stehen über den Platinenrand und müssen um 2mm versetzt werden
4)Routing optimieren: Abstände der Leiterbahnen
5)Debugpins entfernen
6)FETs Q2 und Q4 müssen etwas weiter zur Mitte versetzt werden (stoßen sonst oben an Sicherung an)


V1.0         9.11.2009
----         
- Klemmen KL1A, KL1B, KL2A, KL2B versetzt
- Kupferring für die Schraubenlöcher, damit diese einfacher zu bohren sind
- FETs Q2 und Q4 etwas weiter zur Mitte versetzt 
- Debugpins entfernt
- Kontrolle: Lochdurchmesser
	+ 1,5mm Q1..Q4
	+ 2,8mm Schraubenlöcher
	+ 0,7 VIAS
	+ 1,2 Klemmen
	+ 1,4 Sicherungen
	+ 1,3 R1, R101   (geändert)
	+ 1,0 SV1 (geändert)

aus V1.0 gewonnene Erkenntnisse:
- I-Signal ist unbrauchbar da nicht jeder Nulldurchgang detektiert werden kann,
  nur wenn Dimmer auf voller Helligkeit ist


V1.1         4.1.2010
----         
- Die Widerstände  R6,R12,R15, R106,R112,R115 auf 20k erhöht
- Netzteil um -12V erweitert
- Operationverstärker an -12 angeschlossen
  --> U-Signal ist jetzt symmetrisch
- Neue Erzeugung des I-Signals: liefert jetzt Pulse bei Stromnulldurchgang (100Hz)
  Der Verstärkungsfaktor des OPV wurde mit 1500 festgelegt, damit sind die Impulsbreiten bei
  15Watt => 2700us      50Watt => 680us     200Watt => 120us  (gemessen)
  ist die Verstärkung größer, so werden bei großen Leistungen keine Pulse mehr erzeugt
  ist die Verstärkung kleiner, so werden bei kleinen Leistungen die Pulse zu lang, so
  dass der Stromnulldurchgang nicht mehr sauber erkannt werden kann.
  Wünschenswert wäre eine nichtlineare Verstärkung, die kleine Signale mehr verstärkt als große
  Theorie: Pulsbreite T = 6200 / R22 / P        T in s,  P in Watt,  R22 in Ohm
- Layout angepasst, Leiterbahnen zwischen den Optokopplern entfernt
- Bestückungsdruck optimiert
  Achtung: für den Bestückungsdruck muessen die folgenden Layer verwendet werden:
	  21 tplace
	  25 tnames
	  27 tvalues
	  51 tdocu
- Diese Version wurde am 14.1.2010 bei Q-Print in Auftrag gegeben
  http://q-pcb.com

aus V1.1 gewonnene Erkenntnisse:
- Abmessungen: die Länge der Platine von 87,4mm íst zu groß, sie darf maximal 87,2 mm sein damit
  sie noch ins Gehäuse passt.
- die Löcher für die Befestigungsschrauben müssen um 0.5mm nach links (230V Teil) verschoben werden
- der von Bauteilen freie Platzum die Löcher muss etwas größer werden
- Durchmesser der Befestigungsschrauben muss 2.3mm sein (statt 2.8)
- die Aussparungen für die Eckschrauben müssen etwas größer sein.
- die Klemmen müssen jeweils 0.5mm weiter zur Mitte
- C2, C102 sind im Schaltplan mit falscher Polarität eingezeichnet
- Q2 muss um 0.5mm nach unten verschoben werden (von Si weg) [Q1,Q3,Q4 stimmen]
- R1, R101 geringerer Pinabstand neu:   mm
  Pin am Trafo bleibt, Pin an Si wandert weiter zur Mitte, Bestückungsdruck auf V-Variante ändern
- R12, R112 müssen 15kOhm sein (statt 20kOhm)
- evtl. Widerstandswerte konsolidieren (d.h. möglichst gleiche Werte verwenden)
- bei der Beschaffung auf Bauform 204 achten, dann müssen nicht so viele horizontal montiert werden.


V1.2         5.2.2010
----         
- C2, C102 im Schaltplan gedreht (war falsche Polarität)
- R12, R112 jetzt 15kOhm (statt 20kOhm)
- Die Länge der Platine auf 87,2mm verkleinert. -0.2mm auf EIB-Seite
- die Aussparungen für die Eckschrauben um 0.2mm vergrößert.
- die Klemmen jeweils 0.5mm weiter zur Mitte gesetzt
- Durchmesser der Befestigungslöcher 2.3mm (statt 2.8)
- die Löcher für die Befestigungsschrauben müssen um 0.5mm nach links (230V Teil) verschoben werden
- der von Bauteilen freie Platzum die Löcher muss etwas größer werden
- Q2 um 0.5mm nach unten verschoben (von Si weg) [Q1,Q3,Q4 stimmten]



V1.3         9.3.2010
----         
- Hysterese im Überlastmodul passte nicht mehr: R20 / R120 auf 220kOhm geändert





ToDo
----
HW:
- Ansteuerung der FETs invertieren, so dass die Lampen ohne Controller aus sind
- Entstörglied einfügen:
     + L in serie direkt vor Ausgang  
     + C parallel zu den FETs
     + Varistor parallel zu den FETs, z.B. S10K250
  analog zu Herstellerdimmern
- evtl. Widerstandswerte konsolidieren (d.h. möglichst gleiche Werte verwenden)
- Wünschenswert wäre eine nichtlineare Verstärkung bei der Erzeugung des I-Signals, 
  die kleine Signale mehr verstärkt als große
- bei der Beschaffung auf Bauform 204 achten, dann müssen nicht so viele horizontal montiert werden.
