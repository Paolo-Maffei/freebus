V0.1
----
- Erster Entwurf eines Universaldimmers, der die Lastart erkennt und entsprechend das 
  Phasenanschnittsverfahren auswÃ¤hlt.
- Bisher ist nur der Leistungsteil geplant, die Ansteuerung sollte der eigentliche EIB-Controller mit Ã¼bernehmen.
  Hier kenne ich die Software noch nicht, so dass ich nicht weiss, ob das funktioniert.
  Es muss wohl Ã¼ber Interrupts und Timer laufen, wieviele davon frei sind ist mir noch unbekannt
- Ansteuerung der FETS Ã¼ber IO4 und einen Optokoppler
- Phasenlage der Spannung (U-Signal) Ã¼ber einen OperationsverstÃ¤rker und Optokoppler auf Port IO1 und SDA (wegen IRQ)
  Muss noch geklÃ¤rt werden ob nÃ¶tig / mÃ¶glich.
- Phasenlage des Stroms Ã¼ber R1 einen OperationsverstÃ¤rker und Optokoppler auf Port IO2
- Feststellen der Lastart: z.B. nach Erkennung eines Spannungssignals wird die rel. Phasenlage zwischen U-Signal und I-Signal gemessen
  und daraus die Lastart bestimmt. 
- zur Spannungsversorgung der OperationsverstÃ¤rker ist bisher ein C-Netzteil geplant,
  dies ist wegen dem C allerdings recht groÃŸ, vielleicht fÃ¤llt mir ja noch was besseres ein
  Nachgeschaltet ist ein DC-CD-Wanderler, der 2x12V galvanisch getrennt daraus macht.
  Damit liegen die +-12V immer relativ zu AGND, welches an R1 fixiert ist.
  Vielleicht kann bei geeigneter Schaltung die galvanische Trennung und die +-12V entfallen,
  das wÃ¼rde den Schaltungsaufwand und den Platzbedart erheblich minimieren.
  Ideen fÃ¼r eine Anschaltung?
- Schaltung ist bisher nur theoretisch Entworfen


V0.2
----
- C5 entfern da unnÃ¶tig


V0.3
----
- Zwischenversion


V0.4
----
- Kondensatoren nach DC/DC entfernt
- R13 und R14 hinzugefÃ¼gt
- Schaltung auf Steckbrett aufgebaut und getestet (nur mit 5V geleichspannung, ohne Controller
  --> U-Signal und I-Signal werden sauber erzeugt.
      Damit sinddie NulldurchgÃ¤nge von Spannungund Strom genau detektierbar


V0.5
----
- OperationsverstÃ¤rker fÃ¼r I-Signal invertiert
- WiderstÃ¤nden nach Optokopplern eingefÃ¼gt (falls Port = Ausgang)
- DC/DC Wandler nur mit einfachen 12V
- Portzuordnung neu festgelegt


V0.6
----
- C-Netzteil und DC/DC-Wandler durch Trafo ersetzt
- Ueberlasterkennung hinzugefuegt
- 2. Kanal hinzugefuegt


V0.6.1
------
- C5,C6 hinzugefuegt

V0.6.3
------
- R16,R16,R116,R117 geaendert
- erstes Boardlayout erstellt (noch ohne Pullup)


V0.7
----
- Pullupwiderstaende (R13,R18,R19,R113,R118,R119) entfernt
  sind unnoetig wenn uC im Modus Quasi-Bidirektional


V0.8
----
- Ueberlastsensor schaltet nun hardwaremaessig die FETs aus
  --> Kurzschlußchutz

V0.8.1
------
- Testpins hinzugefügt


V0.9
----
- Überlastschutz geändert:
    R20,R120 Hysterese eingebaut
    R21,R121 Strombegrenzung wegen Einschaltstromspitzen
    R16,R116 Strombegrenzung auf 350W eingestellt 3k9
  Bei Ueberlast werden die FETs für 3s hardwaremaessig abgeschaltet und 
  der Ueberlastfall an den Controller gemeldet

Erfahrungen aus der aufgebauten Version 0.9:
1)Lochdurchmesser bei selbstgefertigter Platine:
  alle Bohrungen mit 0,8mm außer
	+ 0,5mm für die VIAs
	+ 1,0mm für SV1 Stiftleiste
	+ 1,2mm für R1,R101 und alle Klemmen
	+ 1,5mm für Q1..Q4 und Sicherung
	+ 2,0mm für die Schraubenlöcher
2)Kupferring für die Schraubenlöcher, damit diese einfacher zu bohren sind
3)Klemmen KL1A, KL1B, KL2A, KL2B stehen über den Platinenrand und müssen um 2mm versetzt werden
4)Routing optimieren: Abstände der Leiterbahnen
5)Debugpins entfernen
6)FETs Q2 und Q4 müssen etwas weiter zur Mitte versetzt werden (stoßen sonst oben an Sicherung an)


V1.0         9.11.2009
----         
- Klemmen KL1A, KL1B, KL2A, KL2B versetzt
- Kupferring für die Schraubenlöcher, damit diese einfacher zu bohren sind
- FETs Q2 und Q4 etwas weiter zur Mitte versetzt 
- Debugpins entfernt
- Kontrolle: Lochdurchmesser
	+ 1,5mm Q1..Q4
	+ 2,8mm Schraubenlöcher
	+ 0,7 VIAS
	+ 1,2 Klemmen
	+ 1,4 Sicherungen
	+ 1,3 R1, R101   (geändert)
	+ 1,0 SV1 (geändert)

aus V1.0 gewonnene Erkenntnisse:
- I-Signal ist unbrauchbar da nicht jeder Nulldurchgang detektiert werden kann,
  nur wenn Dimmer auf voller Helligkeit ist


V1.1         4.1.2010
----         
- Die Widerstände  R6,R12,R15, R106,R112,R115 auf 20k erhöht
- Netzteil um -12V erweitert
- Operationverstärker an -12 angeschlossen
  --> U-Signal ist jetzt symmetrisch
- Neue Erzeugung des I-Signals: liefert jetzt Pulse bei Stromnulldurchgang (100Hz)
  Der Verstärkungsfaktor des OPV wurde mit 1500 festgelegt, damit sind die Impulsbreiten bei
  15Watt => 2700us      50Watt => 680us     200Watt => 120us  (gemessen)
  ist die Verstärkung größer, so werden bei großen Leistungen keine Pulse mehr erzeugt
  ist die Verstärkung kleiner, so werden bei kleinen Leistungen die Pulse zu lang, so
  dass der Stromnulldurchgang nicht mehr sauber erkannt werden kann.
  Wünschenswert wäre eine nichtlineare Verstärkung, die kleine Signale mehr verstärkt als große

! Routing ist noch nicht abgeschlossen, es wird sehr eng!
  Folgende Alternativen sind möglich:
	1. Top-Layer einführen
	2. Sicherungen weglassen
	3. Gehäuse eine Stufe größer wählen


ToDo
----
o evtl. Überstromsensor muss so geändert werden, dass im Normalbetrieb die LED des Optokopplers
  nicht angesteuert ist --> Stromersparnis
o evtl. die Ansteuerung so verändern, dass nicht 22k auf Masse geleitet wird, da sonst
  0.5mA Verlust
o Wünschenswert wäre eine nichtlineare Verstärkung, die kleine Signale mehr verstärkt als große


ToDo
----
SW:
- Erstellung des Applikationsprogramms
- Erkennung Lastausfall (kein I-Signal trotz U-Signal und Eingeschaltet)
- Erkennung Spannungsausfall (kein U-Signal)
- Helligkeitswert immer 0-255 unabaengig von der Grundhelligkeit (wie beim GIRA-Dimmer)
